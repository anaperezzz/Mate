<!doctype html>
<html lang="es" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruta Lineal: Carrera de Buses</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&amp;family=Inter:wght@400;500;600&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
        }
        
        .montserrat { font-family: 'Montserrat', sans-serif; }
        .inter { font-family: 'Inter', sans-serif; }
        
        .bg-midnight { background-color: #0F4C81; }
        .bg-turquoise { background-color: #29A3B1; }
        .bg-orange { background-color: #FF8A00; }
        .text-midnight { color: #0F4C81; }
        .text-turquoise { color: #29A3B1; }
        .text-orange { color: #FF8A00; }
        .border-midnight { border-color: #0F4C81; }
        .border-turquoise { border-color: #29A3B1; }
        
        .map-texture {
            background-image: 
                radial-gradient(circle at 25% 25%, #f0f9ff 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, #e0f2fe 1px, transparent 1px);
            background-size: 50px 50px;
            background-color: #fafbfc;
        }
        
        .game-panel {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
            box-shadow: 0 8px 32px rgba(15, 76, 129, 0.1);
            transition: all 0.3s ease;
        }
        
        .game-panel:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(15, 76, 129, 0.15);
        }
        
        .pixel-icon {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .bus-animation {
            transition: all 2s ease-in-out;
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes busMove {
            0% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(60px) translateY(-20px); }
            50% { transform: translateX(120px) translateY(-40px); }
            75% { transform: translateX(180px) translateY(-60px); }
            100% { transform: translateX(240px) translateY(-70px); }
        }
        
        .bus-moving {
            animation: busMove 8s linear infinite;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #29A3B1 0%, #FF8A00 100%);
        }
        
        .game-button {
            background: linear-gradient(145deg, #29A3B1 0%, #0F4C81 100%);
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(41, 163, 177, 0.3);
        }
        
        .game-button:active {
            transform: translateY(0);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full map-texture inter">
  <div class="min-h-full p-4">
   <div class="max-w-7xl mx-auto"><!-- Header -->
    <header class="text-center mb-8 fade-in">
     <div class="flex items-center justify-center gap-4 mb-4">
      <div class="w-16 h-16 bg-orange rounded-lg flex items-center justify-center pixel-icon">
       üèÅ
      </div>
      <div>
       <h1 id="main-title" class="text-4xl md:text-5xl font-bold text-midnight montserrat">Ruta Lineal: Carrera de Buses</h1>
       <p id="subtitle" class="text-lg text-turquoise font-medium mt-2">Modelo matem√°tico del recorrido usando una funci√≥n lineal</p>
      </div>
      <div class="w-16 h-16 bg-turquoise rounded-lg flex items-center justify-center pixel-icon">
       üöå
      </div>
     </div>
    </header><!-- Main Content Grid -->
    <div class="grid lg:grid-cols-3 gap-6 mb-8"><!-- Problem Statement Panel -->
     <div class="game-panel rounded-2xl p-6 fade-in">
      <div class="flex items-center gap-3 mb-4">
       <div class="w-10 h-10 bg-midnight rounded-lg flex items-center justify-center text-white text-xl">
        üìç
       </div>
       <h2 class="text-xl font-bold text-midnight montserrat">Planteamiento del Problema</h2>
      </div>
      <p id="problem-text" class="text-gray-700 mb-4 leading-relaxed">Modelamos el trayecto de casa a Oportunidades. Registramos distancia (x) y tiempo (y). Ajustamos una funci√≥n lineal y = mx + b, donde m es la velocidad promedio y b el tiempo de espera.</p><button class="game-button text-white px-4 py-2 rounded-lg font-medium text-sm"> üì± Datos en Google Maps </button>
     </div><!-- Data and Equation Panel -->
     <div class="game-panel rounded-2xl p-6 fade-in">
      <div class="flex items-center gap-3 mb-4">
       <div class="w-10 h-10 bg-turquoise rounded-lg flex items-center justify-center text-white text-xl">
        üìä
       </div>
       <h2 class="text-xl font-bold text-midnight montserrat">Datos y Ecuaci√≥n</h2>
      </div><!-- Data Table -->
      <div class="mb-6">
       <table class="w-full border-collapse">
        <thead>
         <tr class="bg-gray-100">
          <th class="border border-gray-300 px-3 py-2 text-midnight font-semibold">Distancia (km)</th>
          <th class="border border-gray-300 px-3 py-2 text-midnight font-semibold">Tiempo (min)</th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td class="border border-gray-300 px-3 py-2 text-center">0</td>
          <td class="border border-gray-300 px-3 py-2 text-center">4</td>
         </tr>
         <tr>
          <td class="border border-gray-300 px-3 py-2 text-center">2</td>
          <td class="border border-gray-300 px-3 py-2 text-center">12</td>
         </tr>
         <tr>
          <td class="border border-gray-300 px-3 py-2 text-center">4</td>
          <td class="border border-gray-300 px-3 py-2 text-center">20</td>
         </tr>
         <tr>
          <td class="border border-gray-300 px-3 py-2 text-center">6</td>
          <td class="border border-gray-300 px-3 py-2 text-center">28</td>
         </tr>
         <tr>
          <td class="border border-gray-300 px-3 py-2 text-center">8</td>
          <td class="border border-gray-300 px-3 py-2 text-center">32</td>
         </tr>
        </tbody>
       </table>
      </div><!-- Equation Box -->
      <div class="bg-gradient-to-r from-turquoise to-midnight text-white p-4 rounded-lg">
       <div class="text-center">
        <div id="equation-text" class="text-2xl font-bold montserrat mb-2">
         y = 3.5x + 4
        </div>
        <div class="text-sm">
         <p><strong>m = 3.5 min/km</strong> ‚Üí velocidad promedio</p>
         <p><strong>b = 4 min</strong> ‚Üí tiempo de espera inicial</p>
        </div>
       </div>
      </div>
     </div><!-- Graph and Animation Panel -->
     <div class="game-panel rounded-2xl p-6 fade-in">
      <div class="flex items-center gap-3 mb-4">
       <div class="w-10 h-10 bg-orange rounded-lg flex items-center justify-center text-white text-xl">
        üìà
       </div>
       <h2 class="text-xl font-bold text-midnight montserrat">Gr√°fica y Simulaci√≥n</h2>
      </div><!-- Graph Container -->
      <div class="relative bg-white border-2 border-gray-200 rounded-lg p-4 mb-4" style="height: 320px;"><!-- Graph Grid -->
       <svg width="100%" height="100%" class="absolute inset-0" viewbox="0 0 320 280"><!-- Grid lines --> <defs>
         <pattern id="grid" width="30" height="30" patternunits="userSpaceOnUse">
          <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#e5e7eb" stroke-width="1" />
         </pattern>
        </defs> <rect width="100%" height="100%" fill="url(#grid)" /> <!-- Major grid lines --> <!-- Vertical lines (X axis) --> <line x1="50" y1="20" x2="50" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="80" y1="20" x2="80" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="110" y1="20" x2="110" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="140" y1="20" x2="140" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="170" y1="20" x2="170" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="200" y1="20" x2="200" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="230" y1="20" x2="230" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="260" y1="20" x2="260" y2="240" stroke="#d1d5db" stroke-width="1" /> <!-- Horizontal lines (Y axis) --> <line x1="50" y1="240" x2="260" y2="240" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="220" x2="260" y2="220" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="200" x2="260" y2="200" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="180" x2="260" y2="180" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="160" x2="260" y2="160" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="140" x2="260" y2="140" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="120" x2="260" y2="120" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="100" x2="260" y2="100" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="80" x2="260" y2="80" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="60" x2="260" y2="60" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="40" x2="260" y2="40" stroke="#d1d5db" stroke-width="1" /> <line x1="50" y1="20" x2="260" y2="20" stroke="#d1d5db" stroke-width="1" /> <!-- Main Axes --> <line x1="50" y1="240" x2="260" y2="240" stroke="#374151" stroke-width="3" /> <line x1="50" y1="240" x2="50" y2="20" stroke="#374151" stroke-width="3" /> <!-- X-axis numbers --> <text x="50" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         0
        </text> <text x="80" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         2
        </text> <text x="110" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         4
        </text> <text x="140" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         6
        </text> <text x="170" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         8
        </text> <text x="200" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         10
        </text> <text x="230" y="255" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         12
        </text> <!-- Y-axis numbers --> <text x="40" y="245" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         0
        </text> <text x="40" y="220" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         5
        </text> <text x="40" y="200" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         10
        </text> <text x="40" y="180" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         15
        </text> <text x="40" y="160" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         20
        </text> <text x="40" y="140" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         25
        </text> <text x="40" y="120" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         30
        </text> <text x="40" y="100" text-anchor="middle" class="text-xs fill-gray-700 font-semibold">
         35
        </text> <!-- Street simulation - Linear function line y = 3.5x + 4  Scale: X axis: 15px per unit, Y axis: 5px per unit --> <!-- Origin at (50, 240) --> <!-- (0,4): x=50, y=240-20=220 --> <!-- (8,32): x=50+120=170, y=240-160=80 --> <!-- Street base (wider gray line) --> <line id="street-base" x1="50" y1="220" x2="170" y2="80" stroke="#6B7280" stroke-width="12" stroke-linecap="round" /> <!-- Street surface (yellow line for road) --> <line id="street-surface" x1="50" y1="220" x2="170" y2="80" stroke="#FCD34D" stroke-width="8" stroke-linecap="round" /> <!-- Street center line (dashed white) --> <line id="street-center" x1="50" y1="220" x2="170" y2="80" stroke="#FFFFFF" stroke-width="1" stroke-dasharray="4,3" stroke-linecap="round" /> <!-- Mathematical function line (thin blue for reference) --> <line id="function-line" x1="50" y1="220" x2="170" y2="80" stroke="#29A3B1" stroke-width="2" opacity="0.7" stroke-dasharray="2,2" /> <!-- Axis labels --> <text x="155" y="275" text-anchor="middle" class="text-sm fill-gray-600 font-semibold">
         Distancia (km)
        </text> <text x="25" y="130" text-anchor="middle" class="text-sm fill-gray-600 font-semibold" transform="rotate(-90 25 130)">
         Tiempo (min)
        </text>
       </svg><!-- Animated Bus -->
       <div id="animated-bus" class="absolute text-2xl" style="left: 42px; top: 212px; z-index: 10;">
        üöå
       </div><!-- Speed Counter -->
       <div id="speed-counter" class="absolute top-4 right-4 bg-midnight text-white px-3 py-1 rounded-lg text-sm font-bold">
        Velocidad: 3.5 min/km
       </div><!-- Position Counter -->
       <div id="position-counter" class="absolute top-4 left-4 bg-orange text-white px-3 py-1 rounded-lg text-sm font-bold">
        Posici√≥n: (0, 4)
       </div>
      </div><!-- Control Buttons -->
      <div class="flex gap-3 justify-center"><button id="play-btn" class="game-button text-white px-6 py-2 rounded-lg font-medium"> ‚ñ∂Ô∏è Reproducir </button> <button id="pause-btn" class="game-button text-white px-6 py-2 rounded-lg font-medium"> ‚è∏Ô∏è Pausar </button> <button id="reset-btn" class="game-button text-white px-6 py-2 rounded-lg font-medium"> üîÑ Reiniciar </button>
      </div>
     </div>
    </div><!-- Procedure and Solution -->
    <div class="game-panel rounded-2xl p-6 mb-8 fade-in">
     <div class="flex items-center gap-3 mb-6">
      <div class="w-12 h-12 bg-turquoise rounded-lg flex items-center justify-center text-white text-2xl">
       üîß
      </div>
      <h2 class="text-2xl font-bold text-midnight montserrat">Procedimiento y Soluci√≥n</h2>
     </div>
     <div class="grid md:grid-cols-2 gap-8">
      <div>
       <h3 class="text-lg font-semibold text-midnight mb-4 montserrat">Pasos del Proceso:</h3>
       <ol class="space-y-3 text-gray-700">
        <li class="flex items-start gap-3"><span class="bg-midnight text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">1</span> Medir distancia y tiempo en Google Maps</li>
        <li class="flex items-start gap-3"><span class="bg-midnight text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">2</span> Registrar pares ordenados (x,y)</li>
        <li class="flex items-start gap-3"><span class="bg-midnight text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">3</span> Calcular pendiente: m = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)</li>
        <li class="flex items-start gap-3"><span class="bg-midnight text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">4</span> Determinar intercepto b (cuando x=0)</li>
        <li class="flex items-start gap-3"><span class="bg-midnight text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">5</span> Escribir ecuaci√≥n y = mx + b y graficar</li>
       </ol>
      </div>
      <div>
       <h3 class="text-lg font-semibold text-midnight mb-4 montserrat">Ejemplo de C√°lculo:</h3>
       <div class="bg-gray-50 p-4 rounded-lg">
        <p class="mb-2"><strong>C√°lculo de la pendiente:</strong></p>
        <p class="text-turquoise font-mono">m = (32 - 4)/(8 - 0) = 28/8 = 3.5</p>
        <p class="mt-4 mb-2"><strong>Intercepto:</strong></p>
        <p class="text-turquoise font-mono">b = 4 (cuando x = 0)</p>
        <p class="mt-4 mb-2"><strong>Ecuaci√≥n final:</strong></p>
        <p class="text-orange font-mono text-lg font-bold">y = 3.5x + 4</p>
        <div class="mt-4 p-3 bg-midnight text-white rounded-lg">
         <p class="text-sm"><strong>Conclusi√≥n:</strong> La pendiente (3.5) representa los minutos por kil√≥metro. El intercepto (4) es el tiempo de espera inicial.</p>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Footer -->
    <footer class="game-panel rounded-2xl p-6 text-center fade-in">
     <div class="flex items-center justify-center gap-4 mb-4"><span class="text-2xl">üéØ</span> <span class="text-2xl">üìä</span> <span class="text-2xl">üöå</span> <span class="text-2xl">üìà</span>
     </div>
     <p id="footer-text" class="text-gray-700 text-lg"><strong>Entrega:</strong> Explica la pendiente (m) y el intercepto (b) en el contexto del viaje. Usa Desmos o GeoGebra para verificar. Entrega: exposici√≥n y diapositiva impresa.</p>
    </footer>
   </div>
  </div>
  <script>
        // Default configuration
        const defaultConfig = {
            main_title: "Ruta Lineal: Carrera de Buses",
            subtitle: "Modelo matem√°tico del recorrido usando una funci√≥n lineal",
            problem_text: "Modelamos el trayecto de casa a Oportunidades. Registramos distancia (x) y tiempo (y). Ajustamos una funci√≥n lineal y = mx + b, donde m es la velocidad promedio y b el tiempo de espera.",
            equation_text: "y = 3.5x + 4",
            footer_text: "Entrega: Explica la pendiente (m) y el intercepto (b) en el contexto del viaje. Usa Desmos o GeoGebra para verificar. Entrega: exposici√≥n y diapositiva impresa."
        };

        // Animation variables
        let animationRunning = false;
        let animationInterval;
        let currentStep = 0;
        const dataPoints = [
            {x: 0, y: 4, pos: {left: 42, top: 212}},   // (0,4) - exactly on SVG point (50,220)
            {x: 2, y: 11, pos: {left: 72, top: 172}},  // (2,11) - exactly on SVG point (80,180)
            {x: 4, y: 18, pos: {left: 102, top: 132}}, // (4,18) - exactly on SVG point (110,140)
            {x: 6, y: 25, pos: {left: 132, top: 92}},  // (6,25) - exactly on SVG point (140,100)
            {x: 8, y: 32, pos: {left: 162, top: 72}}   // (8,32) - exactly on SVG point (170,80)
        ];

        // DOM elements
        const animatedBus = document.getElementById('animated-bus');
        const positionCounter = document.getElementById('position-counter');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');

        // Animation functions
        function startAnimation() {
            if (animationRunning) return;
            
            animationRunning = true;
            playBtn.textContent = '‚è∏Ô∏è Pausar';
            
            animationInterval = setInterval(() => {
                if (currentStep < dataPoints.length - 1) {
                    currentStep++;
                    const point = dataPoints[currentStep];
                    
                    // Move bus
                    animatedBus.style.left = point.pos.left + 'px';
                    animatedBus.style.top = point.pos.top + 'px';
                    
                    // Update position counter
                    positionCounter.textContent = `Posici√≥n: (${point.x}, ${point.y})`;
                    
                    // Add bounce effect
                    animatedBus.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        animatedBus.style.transform = 'scale(1)';
                    }, 200);
                } else {
                    // Animation complete
                    pauseAnimation();
                    setTimeout(resetAnimation, 1000);
                }
            }, 2000);
        }

        function pauseAnimation() {
            animationRunning = false;
            clearInterval(animationInterval);
            playBtn.textContent = '‚ñ∂Ô∏è Reproducir';
        }

        function resetAnimation() {
            pauseAnimation();
            currentStep = 0;
            const point = dataPoints[0];
            animatedBus.style.left = point.pos.left + 'px';
            animatedBus.style.top = point.pos.top + 'px';
            positionCounter.textContent = `Posici√≥n: (${point.x}, ${point.y})`;
        }

        // Event listeners
        playBtn.addEventListener('click', () => {
            if (animationRunning) {
                pauseAnimation();
            } else {
                startAnimation();
            }
        });

        pauseBtn.addEventListener('click', pauseAnimation);
        resetBtn.addEventListener('click', resetAnimation);

        // Element SDK implementation
        async function onConfigChange(config) {
            document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
            document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
            document.getElementById('problem-text').textContent = config.problem_text || defaultConfig.problem_text;
            document.getElementById('equation-text').textContent = config.equation_text || defaultConfig.equation_text;
            document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["main_title", config.main_title || defaultConfig.main_title],
                ["subtitle", config.subtitle || defaultConfig.subtitle],
                ["problem_text", config.problem_text || defaultConfig.problem_text],
                ["equation_text", config.equation_text || defaultConfig.equation_text],
                ["footer_text", config.footer_text || defaultConfig.footer_text]
            ]);
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }

        // Initialize animation
        resetAnimation();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997d016fa30f19be',t:'MTc2MjAxNzAyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>